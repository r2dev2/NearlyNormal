var app=function(){"use strict";function t(){}function e(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(e)}function n(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,i,r){e.$$.on_destroy.push(function(e,...i){if(null==e)return t;const r=e.subscribe(...i);return r.unsubscribe?()=>r.unsubscribe():r}(i,r))}function o(t,e){t.appendChild(e)}function u(t,e,i){t.insertBefore(e,i||null)}function l(t){t.parentNode.removeChild(t)}function h(t,e){for(let i=0;i<t.length;i+=1)t[i]&&t[i].d(e)}function d(t){return document.createElement(t)}function c(t){return document.createTextNode(t)}function f(){return c(" ")}function p(t,e,i,r){return t.addEventListener(e,i,r),()=>t.removeEventListener(e,i,r)}function m(t,e,i){null==i?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function g(t){return""===t?null:+t}function v(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e){t.value=null==e?"":e}function M(t,e,i,r){t.style.setProperty(e,i,r?"important":"")}function y(t,e){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e)return void(r.selected=!0)}}let w;function x(t){w=t}function S(){if(!w)throw new Error("Function called outside component initialization");return w}const N=[],T=[],q=[],C=[],$=Promise.resolve();let I=!1;function k(t){q.push(t)}let D=!1;const O=new Set;function F(){if(!D){D=!0;do{for(let t=0;t<N.length;t+=1){const e=N[t];x(e),P(e.$$)}for(x(null),N.length=0;T.length;)T.pop()();for(let t=0;t<q.length;t+=1){const e=q[t];O.has(e)||(O.add(e),e())}q.length=0}while(N.length);for(;C.length;)C.pop()();I=!1,D=!1,O.clear()}}function P(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(k)}}const B=new Set;function V(t,e){t&&t.i&&(B.delete(t),t.i(e))}function U(t,e,i,r){if(t&&t.o){if(B.has(t))return;B.add(t),undefined.c.push((()=>{B.delete(t),r&&(i&&t.d(1),r())})),t.o(e)}}const A="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function R(t){t&&t.c()}function E(t,i,s,a){const{fragment:o,on_mount:u,on_destroy:l,after_update:h}=t.$$;o&&o.m(i,s),a||k((()=>{const i=u.map(e).filter(n);l?l.push(...i):r(i),t.$$.on_mount=[]})),h.forEach(k)}function j(t,e){const i=t.$$;null!==i.fragment&&(r(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function G(t,e){-1===t.$$.dirty[0]&&(N.push(t),I||(I=!0,$.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function _(e,n,s,a,o,u,h=[-1]){const d=w;x(e);const c=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:o,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:i(),dirty:h,skip_bound:!1};let f=!1;if(c.ctx=s?s(e,n.props||{},((t,i,...r)=>{const n=r.length?r[0]:i;return c.ctx&&o(c.ctx[t],c.ctx[t]=n)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](n),f&&G(e,t)),i})):[],c.update(),f=!0,r(c.before_update),c.fragment=!!a&&a(c.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);c.fragment&&c.fragment.l(t),t.forEach(l)}else c.fragment&&c.fragment.c();n.intro&&V(e.$$.fragment),E(e,n.target,n.anchor,n.customElement),F()}x(d)}class L{$destroy(){j(this,1),this.$destroy=t}$on(t,e){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const z=[];function W(e,i=t){let r;const n=[];function a(t){if(s(e,t)&&(e=t,r)){const t=!z.length;for(let t=0;t<n.length;t+=1){const i=n[t];i[1](),z.push(i,e)}if(t){for(let t=0;t<z.length;t+=2)z[t][0](z[t+1]);z.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(s,o=t){const u=[s,o];return n.push(u),1===n.length&&(r=i(a)||t),s(e),()=>{const t=n.indexOf(u);-1!==t&&n.splice(t,1),0===n.length&&(r(),r=null)}}}}var K=function(t,e,i){return t(i={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&i.path)}},i.exports),i.exports}((function(t,e){var i=function(t,e,r={}){this.data=void 0,this.columns=void 0,this.valueMaps=void 0,this.storedResults=void 0,this.lastUpdated=void 0,this.validScales=["nominal","ordinal","interval","metric"],this.zTable=void 0,this.factorials=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,0x1b02b9306890000,243290200817664e4,0x46e7261f127a0000],this.defaultOptions={epsilon:1e-5,excludeColumns:["ID","id"],incompleteBetaIterations:40,incompleteGammaIterations:80,maxBarnardsN:200,spougeConstant:40,suppressWarnings:!1,zTableIterations:25},this.init=function(t,e,i={}){for(var r in void 0===t&&this.errorMessage("No data was supplied."),this.defaultOptions){var n="object"==typeof i&&this.has(i,r)&&this.has(this.defaultOptions,r)?i[r]:this.defaultOptions[r];Object.defineProperty(this,r,{value:n,writable:!1})}return void 0!==t&&this.updateData(t,e),this},this.updateData=function(t,e){this.addData(t),"object"==typeof e&&this.assignValueMap(e),t.constructor===Array&&"object"!=typeof e&&(this.errorMessage("It is strongly encouraged to initalise statistics.js with a variable table that defines the scale of measurement of each variable (e.g. nominal, metric.). All variables will be assumed as nominal and subsequent analyses will likely be flawed."),n.apply(this))},this.addData=function(t){try{let e=typeof t;if("string"!==e&&"object"!==e||null===t)throw"Input variable data is neither an object nor a JSON encoded string. The variable type is "+e+". The data could not be properly imported.";return"string"===e&&(t=JSON.parse(t)),this.data=this.data?this.data.concat(t):t,this.lastUpdated=Date.now(),!0}catch(t){return this.errorMessage(t)}},this.addRow=function(t){if(void 0===t)return this.errorMessage("Add Row: No data was given.");let e=void 0!==this.data?this.data:[];return e.push(t),this.data=e,this.lastUpdated=Date.now(),!0},this.removeRow=function(t,e=!1){if(void 0===t)return this.errorMessage("Remove row: No index was given.");let i=this.data,r=this.has(this.columns,"id")||this.has(this.columns,"ID");if(e&&r){let t=-1,r=0;for(;-1===t&&r<i.length;)(this.has(i[r],"id")&&i[r].id===e||this.has(i[r],"ID")&&i[r].ID===e)&&(t=r);i.splice(r,1)}else{if(e&&!r&&this.errorMessage('Remove row: There is no column "id" or "ID". The index '+t+" will be treated as the number of the row, starting at 0."),t>i.length-1)return this.errorMessage("Remove row: The stored data has only "+i.length+" rows and index "+t+" is too large. Indexes start at 0.");i.splice(t,1)}return this.data=i,this.lastUpdated=Date.now(),!0},this.reset=function(){try{return this.data=void 0,this.storedResults=void 0,this.lastUpdated=Date.now(),!0}catch(t){this.errorMessage(t.message)}},this.assignValueMap=function(t){let e={},i={};for(var r in t){if(!this.has(t,r)||this.excludeColumns.indexOf(r)>-1)continue;let n,s=t[r],a=s;if("object"==typeof s&&this.has(s,"scale")&&(this.has(s,"valueMap")&&(n=s.valueMap),a=s.scale),void 0!==n||"nominal"!==a&&"ordinal"!==a||(n=this.getUniqueValues(this.data.map((t=>t[r])))),void 0!==n&&(i[r]=n),this.validScales.indexOf(a)>-1)e[r]=a;else{e[r]="nominal";let t='"'+a+'" scale for variable "'+r+'" is invalid. It was assumed as nominal. Valid scales of measurement include: '+this.validScales.join(", ");this.errorMessage(t)}}this.columns=e,this.valueMaps=i,this.sanitizeColumns()};var n=function(){let t={},e=["th","st","nd","rd"];for(var i=0;i<this.data.length;i++)if("object"!=typeof this.data[i]){let t=i%100,r=i+(e[(t-20)%10]||e[t]||e[0]);this.errorMessage("The "+r+" row was ignored because it is not an object.")}else for(var r in Object.keys(this.data[i]))!r in t&&(t[r]="nominal");this.columns=t,this.lastUpdated=Date.now()};this.sanitizeColumns=function(){let t=this.columns,e=this.data;for(var i=0;i<e.length;i++){let n=e[i];for(var r in t){let s=n[r],a=s;switch(t[r]){case"metric":case"interval":a=this.isNumeric(s)?s:NaN;break;case"ordinal":if(void 0!==this.valueMaps){let t=this.valueMaps[r];void 0!==t&&(a=t.indexOf(s))}}e[i][r]=a}}this.data=e,this.lastUpdated=Date.now()},this.setScale=function(t,e){return void 0===e?(this.errorMessage("This method needs to be called with valid values for both the variable and the scale of measurement to set."),!1):this.has(this.columns,t)?-1===this.validScales.indexOf(e)?(this.errorMessage('"'+e+'" is not a valid scale of measurement. Valid scales include: '+this.validScales.join(", ")),!1):(this.columns[t]=e,!0):(this.errorMessage('There is no variable "'+t+'" defined.'),!1)},this.getScale=function(t){if(void 0!==t&&this.has(this.columns,t))return this.columns[t]},this.getValueMap=function(t){if(void 0!==t&&this.has(this.columns,t))return this.valueMaps[t]},this.applyValueMap=function(t,e){let i=this.getValueMap(t);if("ordinal"===this.getScale(t)&&void 0!==i)return"undefined"===e&&(e=this.getColumn(t)),e.map((t=>i[t]))},this.checkLastUpdated=function(t,e){return!(""===t||!this.has(this.columns,t)||void 0===t||void 0===e)&&(void 0===this.storedResults||void 0===this.storedResults[t]||void 0===this.storedResults[t][e]||void 0===this.storedResults[t][e].lastUpdated||this.storedResults[t][e].lastUpdated<this.lastUpdated)},this.updateStatistics=function(t,e,i){if(void 0!==t&&void 0!==e&&void 0!==i){var r={value:i,lastUpdated:Date.now()};void 0===this.storedResults?this.storedResults={column:{parameter:r}}:void 0===this.storedResults[t]?this.storedResults[t]={parameter:r}:this.storedResults[t][e]=r}},this.getStatistics=function(t,e){if(void 0!==t&&void 0!==e&&this.has(this.columns,t)&&void 0!==this.storedResults[t][e].value)return this.storedResults[t][e].value},this.getColumn=function(t){return void 0===t?this.errorMessage("Get column: No column to sort was specified."):this.has(this.columns,t)?this.data.map((e=>e[t])):this.errorMessage('Get column: The column "'+t+'" was not found.')},this.sortColumn=function(t,e="asc"){return void 0===t?this.errorMessage("Sort column: No column to sort was specified."):this.has(this.columns,t)?this.sort(this.getColumn(t),e):this.errorMessage('Sort column: The column "'+t+'" was not found.')},this.sortDataByColumn=function(t,{data:e=this.data,order:i="asc",changeOriginal:r=!1}={}){return e!==this.data||void 0!==t&&this.has(this.columns,t)?e===this.data||this.has(e[0],t)?function(t,e,i,r){return e.sort((function(e,n){return r.isNumeric(e[t])&&r.isNumeric(n[t])?("asc"===i?1:-1)*(e[t]-n[t]):0}))}(t,r?e:this.deepCopy(e),i,this):this.errorMessage('Sort data by column: The column "'+t+'" does not exist.'):this.errorMessage("Sort data by column: No column was specified or this column does not exist.")},this.sort=function(t,e="asc"){return void 0===t?this.errorMessage("Sort: No values given."):t.constructor!==Array||0===t.length?this.errorMessage("Sort: No array or an empty array of values was given."):function(t,e,i){return t.sort(((t,r)=>e.isNumeric(t)&&e.isNumeric(r)?("asc"===i?1:-1)*(t-r):0))}(this.deepCopy(t),this,e)},this.getUniqueValues=function(t){if(void 0===t)return this.errorMessage("Get unique values: No values given.");let e=this.validateInput(t,"nominal","get unique values");return!1!==e?this.sort(e.data.filter(((t,i)=>e.data.indexOf(t)===i))):void 0},this.reduceToPairs=function(t,e){if(void 0===e||void 0===t)return this.errorMessage("This method requires two variables to be compared.");let i=this.validateInput(t,"nominal");if(!1===i)return;let r=this.validateInput(e,"nominal");if(!1===r)return;let n=i.length>=r.length?i.length:r.length,s=[],a=[],o=[],u="string"==typeof t?t:"first",l="string"==typeof e?e:"second";for(var h=0;h<n;h++){let t=i.data[h],e=r.data[h];if(void 0!==typeof t&&void 0!==typeof e&&!isNaN(t)&&!isNaN(e)){s.push(t),a.push(e);let i={};i[u]=t,i[l]=e,o.push(i)}}return{length:s.length,missings:n-s.length,valuesFirst:s,valuesSecond:a,valuesCombined:o}},this.validateInput=function(t,e="metric",i=""){let r={};if("string"!=typeof t&&(t.constructor!==Array||t.constructor===Array&&0==t.length))return this.errorMessage("No properly formatted data was supplied. Specify a column by its name (string) or supply an array of values."),!1;if("string"==typeof t&&""!==t)r.data=this.getColumn(t),r.scale=this.getScale(t),r.length=r.data.length;else{if(!(t.constructor===Array&&t.length>0))return!1;if(!1===this.validateData(t,e))return!1;r.data=t,r.scale=e,r.length=r.data.length}if(0==r.length)return this.errorMessage("The supplied data or the data of the supplied column contains no values."),!1;if(!s.apply(this,[r.scale,e])){let t=this.validScales.slice(this.validScales.indexOf(e)).join(", "),n=""!==i?i.charAt(0).toUpperCase()+i.slice(1):"This statistical method";return n+=" is only defined for these scales of measurement: "+t+". The scale of the supplied data is "+r.scale+".",this.errorMessage(n),!1}return r},this.validateData=function(e,i="metric"){if(void 0===e||t.constructor!==Array)return this.errorMessage("Validate data: Specify an array storing the values to be validated.");if("nominal"===i)return!0;for(var r=0;r<e.length;r++)if(!this.isNumeric(e[r]))return this.errorMessage("Validate data: The supplied data contains non-numeric values: "+e[r]+" at index "+r),!1;return!0},this.isNumeric=function(t){return void 0!==t?!Array.isArray(t)&&!isNaN(parseFloat(t))&&isFinite(t):void 0};var s=function(t,e){return this.validScales.indexOf(t)>=this.validScales.indexOf(e)};return this.errorMessage=function(t){if(!this.suppressWarnings)try{throw new TypeError("string"==typeof t?t:t.message)}catch(t){console.error("statistics.js: "+t.message)}},this.has=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},this.deepCopy=function(t){let e=Array.isArray(t)?[]:{};for(let i in t){let r=t[i];e[i]="object"==typeof r?this.deepCopy(r):r}return e},i.prototype.assignRanks=function(t,{data:e=this.data,order:i="asc",handleTiedValues:r="mean",returnFrequencies:n=!1}={}){if(void 0===t)return this.errorMessage("Assign ranks: You need to specify a column to be ranked.");let s=this.deepCopy(this.sortDataByColumn(t,{data:e,order:i,changeOriginal:!1})),a={};for(var o=0;o<s.length;o++){let e=s[o][t];a[e]=a[e]?a[e]+1:1}let u=0,l=[];for(o=0;o<s.length;o++){let e=s[o][t],i=o+1,n="rank-"+t;1===a[e]?u=0:"mean"===r?(u++,i=o+a[e]/2-u+1.5):"random"===r&&(0===l.length&&(l=Array.from(new Array(a[e]),((t,e)=>e+o+1))),i=l[Math.floor(Math.random()*l.length)],l.splice(l.indexOf(i),1)),u==a[e]&&(u=0),s[o][n]=i}return n?{data:s,frequencies:a}:s},i.prototype.contingencyTable=function(t,e){if(void 0===e)return this.errorMessage("A contingency table requires two columns to analyze.");if(!this.has(this.columns,t))return this.errorMessage('There is no variable "'+t+'" defined.');if(!this.has(this.columns,e))return this.errorMessage('There is no variable "'+e+'" defined.');let i=this.getScale(t),r=this.getScale(e);if("nominal"!==i&&"ordinal"!==i||"nominal"!==r&&"ordinal"!==r)return this.errorMessage("Both variables need to be nominal for. They are "+i+" and "+r+".");let n=this.getValueMap(t),s=this.getValueMap(e);if(void 0===n||void 0===s)return this.errorMessage("Contingency table: There are no valid values.");let a={total:{total:0}},o=this.data;for(var u=0;u<o.length;u++){let i=o[u][t],r=o[u][e];void 0===a[i]&&(a[i]={total:0}),a[i][r]=void 0!==a[i][r]?a[i][r]+1:1,a.total[i]=void 0!==a.total[i]?a.total[i]+1:1,a.total[r]=void 0!==a.total[r]?a.total[r]+1:1,a[i].total++,a.total.total++}let l={detailled:a};return n.length<=2&&s.length<=2&&(l.a=a[n[0]][s[0]]||0,l.b=a[n[0]][s[1]]||0,l.c=a[n[1]][s[0]]||0,l.d=a[n[1]][s[1]]||0),l},this.showData=function(t){if("string"==typeof t&&this.has(this.columns,t))"ordinal"===this.getScale(t)?console.log(this.applyValueMap(t)):console.log(this.getColumn(t));else if(void 0===t){let t=this.valueMaps,r=this.data;if(void 0!==t)for(var e in t)if(this.has(t,e)&&void 0!==t[e]&&"ordinal"===this.getScale(e))for(var i=0;i<r.length;i++)r[i][e]=t[e][r[i][e]];console.table(r)}else console.log(t)},this.scatterPlot=function(t=this.data,{canvas:e=null,xAxis:i=null,yAxis:r=null,width:n=null,height:s=null,dotRadius:a=4,showGrid:o=!1,minNumberXMarks:u=8,minNumberYMarks:l=8,background:h="#FFFFFF",dotColor:d="#000000",gridColor:c="#CCCCCC",axisColor:f="#000000"}={}){if(void 0===t)return this.errorMessage("Scatter plot: No data given.");if(t.constructor!==Array||0===t.length)return this.errorMessage("Scotter plot: Data is not an array or empty.");if(u<=0||l<=0)return this.errorMessage("Scotter plot: The number of line to plot must be larger than 0.");let p=typeof t[0];if(!("object"!==p||i&&r))return this.errorMessage("Scatter plot: The variables for the x and y axes need to be supplied.");let m={},g=1/0,v=-1/0,b=1/0,M=-1/0;for(var y=0;y<t.length;y++){let e,n,s=[];if("number"===p||t[0].constructor===Array){if(!this.isNumeric(t[y]))continue;e=y,n=t[y]}else if("object"===p){if(!(this.has(t[y],i)&&this.has(t[y],r)&&this.isNumeric(t[y][i])&&this.isNumeric(t[y][r])))continue;e=t[y][i],n=t[y][r]}this.has(m,e)&&(s=m[e]),s.push(n),m[e]=s,e>v&&(v=e),e<g&&(g=e),n>M&&(M=n),n<b&&(b=n)}g/v<.1&&(g=0),b/M<.1&&(b=0),null===e&&(e=document.createElement("canvas"));let w=e.getContext("2d"),x=n?.1*n:.1*(v-g);for(var S in(n=(n?n-2*x:v-g)+2*a)<400&&(n=400),(s=(s?s-2*x:M-b)+2*a)<400&&(s=400),x<40&&(x=40),e.width=n,e.height=s,w.fillStyle="transparent",w.fillRect(0,0,n,s),w.fillStyle=d,m)for(var N=0;N<m[S].length;N++){let t=(S-g)*(n-a)/(v-g),e=s-(m[S][N]-b)*(s-a)/(M-b)-a;w.fillRect(t,e,a,a)}const T=function(t,e,i,r,n,s=f){t.strokeStyle=s,t.beginPath(),t.moveTo(Math.floor(e),Math.floor(i)),t.lineTo(Math.floor(r),Math.floor(n)),t.stroke(),t.strokeStyle=f};let q=document.createElement("canvas"),C=q.getContext("2d"),$=n+2*x-2*a,I=s+2*x-2*a;q.width=$,q.height=I,C.fillStyle=h,C.fillRect(0,0,$,I),C.fillStyle=f,C.font=.2*x+"px Arial",C.textAlign="center",C.textBaseline="middle";let k=Math.round((v-g)/u),D=k>=1?Math.pow(10,parseInt(k).toString().length-1):Math.pow(10,-2);k=Math.round(k/D)*D;let O=0,F=0,P=0;if(k>0)for(y=0;y<u||O<=v&&F<=n-2*x;y++)O=Math.round(g/D)*D+y*k,F=.5*x+(O-g)*(n-a)/(v-g),F>$-.5*x||F<.5*x||(T(C,F,I-.4*x,F,I-.6*x),o&&T(C,F,I-.6*x,F,.5*x,c),C.fillText(O,F,I-.2*x));let B=(M-b)/l,V=B>=1?Math.pow(10,parseInt(B).toString().length-1):Math.pow(10,-2);if(B=Math.round(B/V)*V,O=0,B>0)for(y=0;y<l||O<=M&&P<=s-2*x;y++)O=Math.round(b/V)*V+y*B,P=1.5*x-2*a+s-(O-b)*(s-a)/(M-b),P>I-.5*x||P<.5*x||(T(C,.4*x,P,.6*x,P),o&&T(C,.6*x,P,n+x-2*a,P,c),C.fillText(O,.2*x,P));return T(C,.5*x,I-.5*x,$-x,I-.5*x),T(C,.5*x,I-.5*x,.5*x,.5*x),C.drawImage(e,.5*x-.5*a,1.5*x-1.5*a),w.drawImage(q,0,0,n,s),e},this.init(t,e,r)};t.exports&&(e=t.exports=i),e.Statistics=i,i.prototype.mean=function(t){return void 0!==t?this.arithmeticMean(t):void 0},i.prototype.arithmeticMean=function(t){if(void 0===t)return this.errorMessage("Arithmetic mean: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"mean"))return this.getStatistics(t,"mean");let e=this.validateInput(t,"interval","arithmetic mean");if(!1===e)return;let i=this.sumExact(e.data)/e.length;return"string"==typeof t&&this.updateStatistics(t,"mean",i),i},i.prototype.geometricMean=function(t){if(void 0===t)return this.errorMessage("Geometric mean: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"geometricMean"))return this.getStatistics(t,"geometricMean");let e=this.validateInput(t,"metric","geometric mean");if(!1===e)return;let i,r=!1;return i=e.data.reduce(((t,e)=>e>0?t*e:(r=!0,t)),1),!r&&e.length>0?i=Math.pow(i,1/e.length):(this.errorMessage("Geometric mean is not defined because the data contains non-positive values."),i=void 0),"string"==typeof t&&this.updateStatistics(t,"geometricMean",i),i},i.prototype.harmonicMean=function(t){if(void 0===t)return this.errorMessage("Harmonic mean: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"harmonicMean"))return this.getStatistics(t,"harmonicMean");let e=this.validateInput(t,"metric","harmonicMean");if(!1===e)return;let i=!1,r=!1,n=e.data.reduce(((t,e)=>e<0?(r=!0,0):0!==e?t+1/e:(i=!0,0)),0);return n=i?0:e.length/n,n=r?void 0:n,"string"==typeof t&&this.updateStatistics(t,"harmonicMean",n),n},i.prototype.rootMeanSquare=function(t){if(void 0===t)return this.errorMessage("Root mean square: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"rootMeanSquare"))return this.getStatistics(t,"rootMeanSquare");let e=this.validateInput(t,"interval","root mean square");if(!1===e)return;let i=Math.sqrt(e.data.reduce(((t,e)=>t+e*e),0)/e.length);return"string"==typeof t&&this.updateStatistics(t,"rootMeanSquare",i),i},i.prototype.cubicMean=function(t){if(void 0===t)return this.errorMessage("Cubic mean: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"cubicMean"))return this.getStatistics(t,"cubicMean");let e=this.validateInput(t,"interval","cubic mean");if(!1===e)return;let i=e.data.reduce(((t,e)=>t+e*e*e),0);return i=i>=0&&e.length>0?Math.pow(i/e.length,1/3):void 0,"string"==typeof t&&this.updateStatistics(t,"cubicMean",i),i},i.prototype.winsorisedMean=function(t,e=.2){if(void 0===t)return this.errorMessage("Winsorised mean: No data was supplied.");if(e<0||e>.5)return this.errorMessage("winsorisedMean should be called with a percentage value within the range of [0, 0.5].");if(.5===e)return this.median(t);let i=this.validateInput(t,"interval","Winsorised (truncated) mean");if(!1===i)return;let r=Math.floor(i.length*e),n=this.sort(i.data).slice(r,i.length-r);return n=Array(r).fill(n[0]).concat(n).concat(Array(r).fill(n[n.length-1])),this.sumExact(n)/i.length},i.prototype.gastwirthCohenMean=function(t,{alpha:e=.25,lambda:i=.25}={}){if(void 0===t)return this.errorMessage("Gastwirth-Cohen mean: No data was supplied.");if(!1===this.validateInput(t,"ordinal","Gastwirth-Cohen Mean"))return;if(!this.isNumeric(e)||e<0||e>.5)return this.errorMessage("Gastwirth-Cohen mean should be called with an alpha value within the range of [0, 0.5].");if(!this.isNumeric(i)||i<0||i>.5)return this.errorMessage("Gastwirth-Cohen mean should be called with a lambda value within the range of [0, 0.5].");let r,n=this.quantile(t,e),s=this.quantile(t,1-e),a=this.median(t);return void 0!==n&&void 0!==s&&void 0!==a&&(r=i*(n+s)+(1-2*i)*a),r},i.prototype.midRange=function(t){if(void 0===t)return this.errorMessage("Mid-range: No data was supplied.");if(!1===this.validateInput(t,"interval","mid-range"))return;let e=this.minimum(t),i=this.maximum(t);return void 0!==e&&void 0!==i?.5*(e+i):void 0},i.prototype.median=function(t){if(void 0===t)return this.errorMessage("Median: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"median"))return this.getStatistics(t,"median");let e=this.quantile(t,.5);return"string"==typeof t&&this.updateStatistics(t,"median",e),e},i.prototype.mode=function(t){if(void 0===t)return this.errorMessage("Mode: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"mode"))return this.getStatistics(t,"mode");let e=this.validateInput(t,"nominal","mode");if(!1===e)return;let i=e.data,r=[],n=[i[0]],s=1;for(var a=1;a<e.length;a++){let t=i[a];r[t]=null==r[t]?1:r[t]+1,r[t]>s?(n=[t],s=r[t]):r[t]===s&&n.push(t)}return 1===n.length&&(n=n[0]),"string"==typeof t&&this.updateStatistics(t,"mode",n),n},i.prototype.minimum=function(t){if(void 0===t)return this.errorMessage("Minimum: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"minimum"))return this.getStatistics(t,"minimum");let e=this.validateInput(t,"ordinal","minimum");if(!1===e)return;let i=1/0,r=e.length;for(;r--;)e.data[r]<i&&(i=e.data[r]);return"string"==typeof t&&this.updateStatistics(t,"minimum",i),i},i.prototype.maximum=function(t){if(void 0===t)return this.errorMessage("Maximum: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"maximum"))return this.getStatistics(t,"maximum");let e=this.validateInput(t,"ordinal","maximum");if(!1===e)return;let i=-1/0,r=e.length;for(;r--;)e.data[r]>i&&(i=e.data[r]);return"string"==typeof t&&this.updateStatistics(t,"maximum",i),i},i.prototype.range=function(t){if(void 0===t)return this.errorMessage("Range: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"range"))return this.getStatistics(t,"range");let e,i;if("string"==typeof t&&"nominal"===this.getScale(t)){if(e=this.validateInput(t,"nominal","range"),!1===e)return;i=this.getUniqueValues(e.data)}else{if(e=this.validateInput(t,"ordinal","range"),!1===e)return;let r=this.sort(e.data);i=r[e.length-1]-r[0]}return"string"==typeof t&&this.updateStatistics(t,"range",i),i},i.prototype.variance=function(t,e=!0){if(void 0===t)return this.errorMessage("Variance: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"variance"))return this.getStatistics(t,"variance");let i=this.validateInput(t,"interval","variance");if(!1===i)return;if(i.length<2)return this.errorMessage("The data supplied to compute variance needs to contain at least two datasets.");let r=0;if(this.isNumeric(e)){for(var n=0;n<i.length;n++)r+=Math.pow(e-i.data[n],2);r/=i.length-1}else{let t=0,s=0;for(n=0;n<i.length;n++){t+=1;let e=i.data[n]-s;s+=e/t,r+=e*(i.data[n]-s)}e&&t>1?r/=t-1:!e&&t>0?r/=t:r=void 0}return"string"==typeof t&&this.updateStatistics(t,"variance",r),r},i.prototype.standardDeviation=function(t,e=!0){if(void 0===t)return this.errorMessage("Standard deviation: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"standardDeviation"))return this.getStatistics(t,"standardDeviation");let i=this.validateInput(t,"interval","standard deviation");if(!1===i)return;if(i.length<2)return this.errorMessage("The data supplied to compute standardDeviation needs to contain at least two datasets.");let r=Math.sqrt(this.variance(t,e));return"string"==typeof t&&this.updateStatistics(t,"standardDeviation",r),r},i.prototype.coefficientOfVariation=function(t,e){if(void 0===t)return this.errorMessage("Coefficient of variation: No data was supplied.");let i=this.validateInput(t,"interval","coefficient of variation");if(!1===i)return;let r=this.standardDeviation(i.data),n=void 0===e?this.mean(i.data):e;return void 0!==r&&void 0!==n&&0!==n?r/n:void 0},i.prototype.indexOfDispersion=function(t,e){if(void 0===t)return this.errorMessage("Index of dispersion: No data was supplied.");let i=this.validateInput(t,"interval","coefficient of variation");if(!1===i)return;let r=this.variance(i.data),n=void 0===e?this.mean(i.data):e;return void 0!==r&&void 0!==n&&0!==n?r/n:void 0},i.prototype.geometricStandardDeviation=function(t){if(void 0===t)return this.errorMessage("Geomtric standard deviation: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"geometricStandardDeviation"))return this.getStatistics(t,"geometricStandardDeviation");let e=this.validateInput(t,"interval","geometric standard deviation");if(!1===e)return;let i=e.length,r=this.geometricMean(t),n=0,s=!1;for(var a=0;a<i;a++)e.data[a]<=0?s=!0:n+=Math.pow(Math.log(e.data[a]/r),2);return n=s?void 0:Math.exp(Math.sqrt(n/i)),"string"==typeof t&&this.updateStatistics(t,"geometricStandardDeviation",n),n},i.prototype.medianAbsoluteDeviation=function(t){if(void 0===t)return this.errorMessage("Median absolute deviation: No data was supplied.");let e=this.validateInput(t,"interval","median absolute deviation");if(!1===e)return;let i=e.data,r=this.median(i);return void 0!==r?(i=i.map((t=>Math.abs(t-r))),this.median(i)):void 0},i.prototype.cumulativeFrequency=function(t,e){if(void 0===t)return this.errorMessage("Cumulative frequency: No data was supplied.");if(void 0===e||!this.isNumeric(e))return void this.errorMessage("You need to specify a boundary for the cumulative frequency analysis that is either an integer or a floating point number.");let i=this.validateInput(t,"ordinal","cumulative frequency analysis");if(!1===i)return;let r=this.sort(i.data),n=0;for(;e>=r[n];)n++;return n},i.prototype.frequencies=function(t){if(void 0===t)return this.errorMessage("Frequencies: No data was supplied.");let e=this.validateInput(t,"nominal","frequencies");if(!1===e)return;let i=e.data,r={},n=[];for(var s=0;s<e.length;s++){let t=i[s];null==r[t]?(n.push(t),r[t]=1):r[t]++}return n=n.sort(((t,e)=>r[e]-r[t])),n=n.map((t=>({value:t,absolute:r[t],relative:r[t]/e.length}))),n},i.prototype.quantile=function(t,e=.5){if(void 0===t)return this.errorMessage("Quantile: No data was supplied.");if(!this.isNumeric(e)||e<0||e>1)return this.errorMessage("Quantiles should be called with a percentage value within the range of [0, 1].");let i=this.validateInput(t,"ordinal","quantile");if(!1===i)return;let r=e*i.length,n=this.sort(i.data);return r%1==0?.5*(n[r]+n[r-1]):n[Math.floor(r)]},i.prototype.quartiles=function(t){if(void 0===t)return this.errorMessage("Quartiles: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"quartiles"))return this.getStatistics(t,"quartiles");let e=[this.quantile(t,.25),this.quantile(t,.75)];return void 0!==e[0]&&void 0!==e[1]?(this.updateStatistics(t,"quartiles",e),e):void 0},i.prototype.interQuartileRange=function(t){if(void 0===t)return this.errorMessage("Interquartile range: No data was supplied.");let e=this.validateInput(t,"interval","interquartile range");if(!1===e)return;let i=this.quartiles(e.data);return void 0!==i?i[1]-i[0]:void 0},i.prototype.skewness=function(t,e=!1){if(void 0===t)return this.errorMessage("Skewness: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"skewness"))return this.getStatistics(t,"skewness");let i=this.validateInput(t,"ordinal","skewness");if(!1===i)return;if(i.length<2)return;let r=this.mean(t),n=this.standardDeviation(t,!1),s=0;for(var a=0;a<i.length;a++)s+=Math.pow(i.data[a]-r,3);let o=s/Math.pow(n,3);return o*=e?i.length/((i.length-1)*(i.length-2)):1/i.length,"string"==typeof t&&this.updateStatistics(t,"skewness",o),o},i.prototype.kurtosis=function(t){if(void 0===t)return this.errorMessage("Kurtosis: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"kurtosis"))return this.getStatistics(t,"kurtosis");let e=this.validateInput(t,"ordinal","kurtosis");if(!1===e)return;if(e.length<2)return;let i=this.mean(t),r=this.standardDeviation(t),n=0;for(var s=0;s<e.length;s++)n+=Math.pow(e.data[s]-i,4);let a=n/(e.length*Math.pow(r,4));return"string"==typeof t&&this.updateStatistics(t,"kurtosis",a),a},i.prototype.excessKurtosis=function(t){if(void 0===t)return this.errorMessage("Excess kurtosis: No data was supplied.");let e=this.kurtosis(t);return void 0!==e?e-3:void 0},i.prototype.sum=function(t){return void 0===t?this.errorMessage("Sum: No data given."):("string"==typeof t&&this.has(this.columns,t)&&(t=this.getColumn(t)),0!=t.length?t.reduce(((t,e)=>this.isNumeric(e)?t+e:t),0):void 0)},i.prototype.sumExact=function(t){if(void 0===t)return this.errorMessage("Sum exact: No data given.");if("string"==typeof t&&this.has(this.columns,t)&&(t=this.getColumn(t)),0==t.length)return;let e=0,i=0;for(var r=0;r<t.length;r++){let n=this.isNumeric(t[r])?t[r]:0;n-=i;let s=e+n;i=s-e-n,e=s}return e},i.prototype.product=function(t){return void 0===t?this.errorMessage("Product: No data given."):("string"==typeof t&&this.has(this.columns,t)&&(t=this.getColumn(t)),0===t.length?1:t.reduce(((t,e)=>this.isNumeric(e)?t*e:t),1))},i.prototype.factorial=function(t){return this.isNumeric(t)&&!Number.isInteger(t)?this.gamma(t):void 0!==this.factorials[t]?this.factorials[t]:this.computeFactorial(t)},i.prototype.computeFactorial=function(t){if(void 0===t||!this.isNumeric(t)||t<0)return;if(void 0!==this.factorials[t])return this.factorials[t];if(!Number.isInteger(t))return this.gamma(t);let e=1,i=1;for(;t>i;)i++,e*=i,void 0===this.factorials[i]&&(this.factorials[i]=e);return e},i.prototype.binomialCoefficient=function(t=1,e=1){if(t<e||e<0)return this.errorMessage("The binomial coefficient is only defined for n and k with n ≥ k ≥ 0. N is "+t+" and k is "+e+".");if(!Number.isInteger(t)||!Number.isInteger(e))return this.errorMessage("The binomial coefficient is only defined for integers n and k.");let i=[];for(var r=1;r<=e;r++)i.push((t+1-r)/r);return this.product(i)},i.prototype.gamma=function(t,e=!1){if(void 0!==t&&this.isNumeric(t)&&!(t<0))return Number.isInteger(t)&&void 0!==this.factorials[t-1]?this.factorials[t-1]:e?this.gammaSpouge(t):this.gammaStirling(t)},i.prototype.gammaSpouge=function(t){if(void 0===t||!this.isNumeric(t)||t<0)return;if(Number.isInteger(t)&&void 0!==this.factorials[t-1])return this.factorials[t-1];const e=this.spougeConstant;let i=Math.pow(t+e,t+.5),r=1,n=0,s=Math.sqrt(2*Math.PI);i*=Math.exp(-t-e),i/=t;for(var a=1;a<e;a++)t++,n=Math.pow(e-a,a-.5),n*=Math.exp(e-a),n/=r,s+=n/t,r*=-a;return s*i},i.prototype.gammaStirling=function(t){if(void 0===t||!this.isNumeric(t)||t<0)return;if(Number.isInteger(t)&&void 0!==this.factorials[t-1])return this.factorials[t-1];let e=1/(10*t);return e=1/(12*t-e),e=.36787944117144233*(e+t),e=Math.pow(e,t),e*=Math.sqrt(6.283185307179586/t),e},i.prototype.incompleteGamma=function(t,e){if(void 0===e)return this.errorMessage("The incomplete lower gamma function is only defined for two numeric variables s and x.");if(!this.isNumeric(t)||!this.isNumeric(e))return this.errorMessage("The incomplete lower gamma function is only defined for numeric variables s and x.");if(e<0)return this.errorMessage("The incomplete lower gamma function is defined for x > 0.");let i=this.incompleteGammaIterations,r=1;for(var n=0;n<i;n++){let s=i-n;r=e+(s-t)/(1+s/r)}return this.gamma(t,!0)-Math.exp(-e)*Math.pow(e,t)/r},i.prototype.regularisedGamma=function(t,e){return void 0===e?this.errorMessage("The regularised lower gamma function is only defined for two numeric variables s and x."):this.isNumeric(t)&&this.isNumeric(e)?e<0?this.errorMessage("The regularised lower gamma function is defined for x > 0."):this.incompleteGamma(t,e)/this.gamma(t,!0):this.errorMessage("The regularised lower gamma function is only defined for numeric variables s and x.")},i.prototype.beta=function(t,e){return void 0===e?this.errorMessage("The beta function is only defined for two numeric variables a and b."):this.isNumeric(t)&&this.isNumeric(e)?t<=0||e<=0?this.errorMessage("The beta function is defined for a and b with a > 0 and b > 0."):Number.isInteger(t)&&Number.isInteger(e)&&t>0&&e>0?this.factorial(t-1)*this.factorial(e-1)/this.factorial(t+e-1):this.gamma(t,!0)*this.gamma(e,!0)/this.gamma(t+e,!0):this.errorMessage("The beta function is only defined for numeric variables a and b.")},i.prototype.incompleteBeta=function(t,e,i){if(void 0===i)return this.errorMessage("The incomplete beta function is only defined for two numeric variables a and b.");if(!this.isNumeric(t)||!this.isNumeric(e)||!this.isNumeric(i))return this.errorMessage("The incomplete beta function is only defined for numeric variables x, a and b.");if(t<0||t>1)return this.errorMessage("The incomplete beta function is defined for x ≥ 0 and x ≦ 1.");if(e<=0||i<=0)return this.errorMessage("The incomplete beta function is defined for a and b with a > 0 and b > 0.");if(1==t)return this.beta(e,i);var r=function(t,e,i,r){if(t%2==0){let n=.5*t;return n*(i-n)*r/((e+2*n-1)*(e+2*n))}{let n=.5*t-.5;return-(e+n)*(e+i+n)*r/((e+2*n)*(e+2*n+1))}};let n=Math.pow(t,e)*Math.pow(1-t,i)/e,s=this.incompleteBetaIterations,a=1;for(var o=0;o<s;o++){a=1+r(s-o,e,i,t)/a}return n/a},i.prototype.regularisedBeta=function(t,e,i){if(void 0===i)return this.errorMessage("The regularised beta function is only defined for two numeric variables a and b.");if(!this.isNumeric(t)||!this.isNumeric(e)||!this.isNumeric(i))return this.errorMessage("The regularised beta function is only defined for numeric variables x, a and b.");if(t>1||t<0)return this.errorMessage("The regularised beta function is defined for x ≥ 0 and x ≦ 1.");if(e<=0||i<=0)return this.errorMessage("The regularised beta function is defined for a and b with a > 0 and b > 0.");if(!Number.isInteger(e)||!Number.isInteger(i))return this.incompleteBeta(t,e,i)/this.beta(e,i);let r=this.epsilon+1,n=e,s=0;for(;r>=this.epsilon;)r=this.binomialCoefficient(i+n-1,n)*Math.pow(t,n),s+=r,n++;return s*Math.pow(1-t,i)},i.prototype.covariance=function(t,e,i=!0){if(void 0===e)return this.errorMessage("Covariance requires two variables to be compared.");let r=this.validateInput(t,"interval","covariance");if(!1===r)return;let n=this.validateInput(e,"interval","covariance");if(!1===n)return;let s=this.reduceToPairs(r.data,n.data);if(0===s.length)return;let a=this.mean(s.valuesFirst),o=this.mean(s.valuesSecond),u=0;for(var l=0;l<s.length;l++)u+=(s.valuesFirst[l]-a)*(s.valuesSecond[l]-o);return i&&s.length>1?u/=s.length-1:!i&&s.length>0?u/=s.length:u=void 0,{covariance:u,missings:s.missings}},i.prototype.correlationCoefficient=function(t,e){if(void 0===e)return this.errorMessage("Pearson correlation coefficient requires two variables to be compared.");let i=this.validateInput(t,"interval","Pearson correlation coefficient");if(!1===i)return;let r=this.validateInput(e,"interval","Pearson correlation coefficient");if(!1===r)return;let n=i.length>=r.length?i.length:r.length,s=i.data,a=r.data,o=[],u=0,l=0;for(var h=0;h<n;h++){let t=s[h],e=a[h];void 0===typeof t||void 0===typeof e||isNaN(t)||isNaN(e)||(u+=t,l+=e,o.push([t,e]))}let d=n-o.length;if(n=o.length,0===n)return;u/=n,l/=n;let c=0,f=0,p=0;for(h=0;h<n;h++){let t=o[h][0]-u,e=o[h][1]-l;c+=t*e,f+=t*t,p+=e*e}return{correlationCoefficient:f>0&&p>0?c/Math.sqrt(f*p):0,missings:d}},i.prototype.spearmansRho=function(t,e,i=!1){if(void 0===e)return this.errorMessage("Spearman's Rho requires two variables to be compared.");if(!1===this.validateInput(t,"ordinal","Spearman's Rho"))return;if(!1===this.validateInput(e,"ordinal","Spearman's Rho"))return;let r=this.reduceToPairs(t,e),n=r.length;if(0===n)return;let s=this.assignRanks(t,{data:r.valuesCombined,returnFrequencies:!0,order:"desc"}),a=s.frequencies;s=this.assignRanks(e,{data:s.data,returnFrequencies:!0,order:"desc"});let o=s.frequencies;s=s.data;let u=6*s.reduce(((i,r)=>i+Math.pow(r["rank-"+t]-r["rank-"+e],2)),0);if(i){let t=Object.values(a).reduce(((t,e)=>t+Math.pow(e,3)-e)),e=Object.values(o).reduce(((t,e)=>t+Math.pow(e,3)-e));u=(Math.pow(n,3)-n-.5*t-.5*e-u)/Math.sqrt((Math.pow(n,3)-n-t)*(Math.pow(n,3)-n-e))}else u=1-u/(Math.pow(n,3)-n);let l=n-2,h=Math.sqrt((l-1)/1.06)*this.fisherTransformation(u),d=1-this.normalCumulativeValue(Math.abs(h)),c=u*Math.sqrt(l/(1-u*u)),f=1-this.studentsTCumulativeValue(Math.abs(c),l);return{rho:u,significanceNormal:{zScore:h,pOneTailed:d,pTwoTailed:2*d},significanceStudent:{degreesOfFreedom:l,tStatistic:c,pOneTailed:f,pTwoTailed:2*f},missings:r.missings}},i.prototype.kendallsTau=function(t,e){if(void 0===e)return this.errorMessage("Kendall's Tau requires two columns to analyze.");if(!1===this.validateInput(t,"ordinal","Kendall's Tau"))return;if(!1===this.validateInput(e,"ordinal","Kendall's Tau"))return;let i=this.reduceToPairs(t,e),r=i.length,n=i.valuesCombined,s=0,a=0,o={},u={};for(var l=0;l<r-1;l++)for(var h=l+1;h<r;h++){let i=n[l][t],r=n[h][t],d=n[l][e],c=n[h][e];i===r?d===c||(o[d]=this.has(o,d)?o[d]+1:1):d===c?u[d]=this.has(u,d)?u[d]+1:1:Math.sign(i-r)===Math.sign(d-c)?s+=1:a+=1}let d=s-a,c=Object.keys(o).length+Object.keys(u).length===0?2*d/(r*(r-1)):void 0,f=3*d/Math.sqrt(.5*r*(r-1)*(2*r+5)),p=this.normalCumulativeValue(-Math.abs(f)),m=2<i.length?2:i.length,g=2*m*d/(r*r*(m-1)),v=c,b=f,M=p;if(void 0===c){v=d/Math.sqrt((s+a+Object.keys(o).length)*(s+a+Object.keys(u).length));let t=0,e=0,i=0,n=0,l=0,h=0;for(var y in o)t+=y*(y-1)*(2*y+5),i+=y*(y-1),n+=y*(y-1)*(y-2);for(var y in u)e+=y*(y-1)*(2*y+5),n+=y*(y-1)/(2*r*(r-1)),h+=y*(y-1)*(y-2)/(9*r*(r-1)*(r-2));b=r*(r-1)*(2*r+5),b=(b-t-e)/18+i*n+l*h,b=d/Math.sqrt(b),M=this.normalCumulativeValue(-Math.abs(b))}return{a:void 0!==c?{tauA:c,z:f,pOneTailed:p,pTwoTailed:2*p}:void 0,b:void 0!==c?{tauB:c,z:f,pOneTailed:p,pTwoTailed:2*p}:{tauB:v,z:b,pOneTailed:M,pTwoTailed:2*M},c:{tauC:g},missings:i.missings}},i.prototype.goodmanKruskalsGamma=function(t,e){if(void 0===e)return this.errorMessage("Goodman and Kruskal's Gamma requires two columns to analyze.");if(!1===this.validateInput(t,"ordinal","Goodman and Kruskal's Gamma"))return;if(!1===this.validateInput(e,"ordinal","Goodman and Kruskal's Gamma"))return;let i=this.reduceToPairs(t,e),r=i.valuesCombined,n=i.length,s=0,a=0;for(var o=0;o<n-1;o++)for(var u=o+1;u<n;u++){let i=r[o][t],n=r[u][t],l=r[o][e],h=r[u][e];i!==n&&l!==h&&(Math.sign(i-n)===Math.sign(l-h)?s+=1:a+=1)}let l=(s-a)/(s+a),h=l*Math.sqrt((s+a)/(n*(1-l*l))),d=1-this.studentsTCumulativeValue(Math.abs(h),n-2);return{gamma:l,tStatistic:h,pOneTailed:d,pTwoTailed:2*d,missings:i.missings}},i.prototype.fisherTransformation=function(t){return void 0===t||!this.isNumeric(t)||t<-1||t>1?this.errorMessage("Fisher transformation is only defined for a Pearson correlation coefficient within the interval of [-1, 1]."):Math.atanh(t)||.5*Math.log((1+t)/(1-t))},i.prototype.linearRegression=function(t,e){if(void 0===e)return this.errorMessage("Linear regression requires two columns to compare.");let i=this.validateInput(t,"interval","linear regression");if(!1===i)return;let r=this.validateInput(e,"interval","linear regression");if(!1===r)return;let n=this.reduceToPairs(i.data,r.data),s=n.valuesFirst,a=n.valuesSecond;n.missings;let o=n.length;if(0===o)return;let u=this.mean(s),l=this.mean(a),h=0,d=0,c=0;for(var f=0;f<o;f++){let t=s[f]-u,e=a[f]-l;c+=t*e,h+=t*t,d+=e*e}if(0===h||0===d)return;let p=c/h,m=c/d,g=l-p*u,v=u-m*l,b=c/Math.sqrt(h*d),M=b*b,y=o>2?1-(1-M)*(o-1)/(o-2):void 0,w=180*Math.acos(b)/Math.PI;return w>90&&(w=180-w),{regressionFirst:{beta1:g,beta2:p},regressionSecond:{beta1:v,beta2:m},coefficientOfDetermination:M,coefficientOfDeterminationCorrected:y,correlationCoefficient:b,phi:w}},i.prototype.normalProbabilityDensity=function(t,e=0,i=1){if(void 0===t)return this.errorMessage("Normal probability density: no x is given.");if(i<=0)return this.errorMessage("Normal probability density: variance must be larger than 0.");let r=-Math.pow(t-e,2)/(2*i);return Math.exp(r)/Math.sqrt(2*Math.PI*i)},i.prototype.normalDistribution=function(t=0,e=1){if(e<=0)return this.errorMessage("Normal distribution: variance must be larger than 0.");let i=0,r=1,n={};for(;r>=this.epsilon&&(r=this.normalProbabilityDensity(t+i,t,e),!(r<this.epsilon));)n[(t+i).toFixed(2)]=r,n[(t-i).toFixed(2)]=r,i+=.01;return n},i.prototype.normalCumulativeValue=function(t){if(void 0===t)return this.errorMessage("Normal cumulative value: no z is given.");let e=t,i=t;for(var r=1;r<this.zTableIterations;r++)i*=t*t/(2*r+1),e+=i;return Math.round(1e5*(.5+e/Math.sqrt(2*Math.PI)*Math.exp(-.5*t*t)))/1e5},i.prototype.normalCumulativeDistribution=function(){let t=this.zTable;if(void 0===t){t={};for(var e=0;e<=4.09;e+=.01){t[(Math.round(100*e)/100).toFixed(2)]=this.normalCumulativeValue(e)}this.zTable=t}return t},i.prototype.binomialProbabilityMass=function(t,e=10,i=.5){return void 0===t?this.errorMessage("Binomial probability mass: the required argument k was not given."):t<0||!Number.isInteger(t)?this.errorMessage("Binomial probability mass: k must be a non-negative integer."):e<0||!Number.isInteger(e)?this.errorMessage("Binomial probability mass: n must be a non-negative integer."):i<0||i>1?this.errorMessage("Binomial probability mass: The probability must lie within the range of [0, 1]."):this.binomialCoefficient(e,t)*Math.pow(i,t)*Math.pow(1-i,e-t)},i.prototype.binomialDistribution=function(t=10,e=.5){if(t<0||!Number.isInteger(t))return this.errorMessage("Binomial distribution: n must be a non-negative integer.");if(e<0||e>1)return this.errorMessage("Binomial distribution: The probability must lie within the range of [0, 1].");let i=0,r=0,n=[],s=1;for(;i<=t;)r=s*Math.pow(e,i)*Math.pow(1-e,t-i),n.push(r),i++,s=s*(t+1-i)/i;return n},i.prototype.binomialCumulativeValue=function(t,e=10,i=.5){return void 0===t?this.errorMessage("Binomial cumulative distribution value: the required argument k was not given."):t<0||!Number.isInteger(t)?this.errorMessage("Binomial cumulative distribution value: k must be a non-negative integer."):e<0||!Number.isInteger(e)?this.errorMessage("Binomial cumulative distribution value: n must be a non-negative integer."):i<0||i>1?this.errorMessage("Binomial cumulative distribution value: The probability must lie within the range of [0, 1]."):this.regularisedBeta(1-i,e-t,t+1)},i.prototype.binomialCumulativeDistribution=function(t=10,e=.5){if(t<0||!Number.isInteger(t))return this.errorMessage("Binomial cumulative distribution: n must be a non-negative integer.");if(e<0||e>1)return this.errorMessage("Binomial cumulative distribution: The probability must lie within the range of [0, 1].");let i=this.binomialDistribution(t,e),r=0;return i.map((function(t){return r=this.sumExact([r,t]),r}),this)},i.prototype.poissonProbabilityMass=function(t,e=1){if(void 0===t||!Number.isInteger(t))return this.errorMessage("Poisson probability mass: the required argument k must be an integer.");if(t<0||e<=0)return this.errorMessage("Poisson probability mass: Both k and lambda must be larger than 0.");if(t>10){let r=1;for(var i=1;i<=t;i++)r*=e*Math.exp(-e/t)/i;return r}return Math.exp(-e)*Math.pow(e,t)/this.factorial(t)},i.prototype.poissonDistribution=function(t=1){if(t<=0)return this.errorMessage("Poisson distribution: Lambda must be larger than 0.");let e=0,i=0,r=[];for(;i<1-this.epsilon;){let n=this.poissonProbabilityMass(e,t);r.push(n),i+=n,e++}return r},i.prototype.poissonCumulativeValue=function(t,e=1){if(void 0===t||!Number.isInteger(t))return this.errorMessage("Poisson cumulative distribution: The number of cumulative events k must be supplied.");if(t<0||e<=0)return this.errorMessage("Poisson distribution: Both k and lambda must be larger than 0.");let i=this.poissonDistribution(e);return t<i.length-1?this.sumExact(i.slice(0,t+1)):1},i.prototype.poissonCumulativeDistribution=function(t=1){if(t<=0)return this.errorMessage("Poisson distribution: lambda must be larger than 0.");let e=this.poissonDistribution(t),i=0;return e.map((function(t){return i=this.sumExact([i,t]),i}),this)},i.prototype.studentsTProbabilityDensity=function(t,e){if(void 0===e)return this.errorMessage("Student's t-distribution probability density: no value for degrees of freedom (df) given.");if(e<=0)return this.errorMessage("Student's t-distribution probability density: degrees of freedom (df) must be larger than 0.");let i=Math.pow(1+t*t/e,-.5*(e+1));return i/=Math.sqrt(e)*this.beta(.5,.5*e),i},i.prototype.studentsTDistribution=function(t){if(void 0===t)return this.errorMessage("Student's t-distribution: no value for degrees of freedom (df) given.");if(t<=0)return this.errorMessage("Student's t-distribution: degrees of freedom (df) must be larger than 0.");let e=0,i=1,r={};for(;i>=this.epsilon&&(i=this.studentsTProbabilityDensity(e,t),!(i<this.epsilon));)r[e.toFixed(2)]=i,r[(-e).toFixed(2)]=i,e+=.01;return r},i.prototype.studentsTCumulativeValue=function(t,e){return void 0===e?this.errorMessage("Student's cumulative t-distribution value: no value for degrees of freedom (df) given."):e<=0?this.errorMessage("Student's cumulative t-distribution value: degrees of freedom (df) must be larger than 0."):t<=0?.5*this.regularisedBeta(e/(t*t+e),.5*e,.5):.5+.5*this.regularisedBeta(t*t/(t*t+e),.5,.5*e)},i.prototype.studentsTCumulativeDistribution=function(t){if(void 0===t)return this.errorMessage("Student's cumulative t-distribution: no value for degrees of freedom (df) given.");if(t<=0)return this.errorMessage("Student's cumulative t-distribution: degrees of freedom (df) must be larger than 0.");let e=0,i=0,r=-.1,n={};for(;i<=1-this.epsilon&&(i=this.studentsTCumulativeValue(e,t),!(r>=i));)n[e.toFixed(2)]=i,n[(-e).toFixed(2)]=i,r=i,e+=.01;return n},i.prototype.chiSquaredProbabilityDensity=function(t,e){return void 0===e?this.errorMessage("Chi squared distribution probability density: no value for degrees of freedom (df) given."):e<=0?this.errorMessage("Chi squared distribution probability density: degrees of freedom (df) must be larger than 0."):t<=0?0:Math.pow(t,.5*e-1)*Math.exp(-.5*t)/(Math.pow(2,.5*e)*this.gamma(.5*e,!0))},i.prototype.chiSquaredDistribution=function(t){if(void 0===t)return this.errorMessage("Chi squared distribution: no value for degrees of freedom (df) given.");if(t<=0)return this.errorMessage("Chi squared distribution: degrees of freedom (df) must be larger than 0.");let e=.01,i=1,r={"0.00":0};for(;(t<=2&&i>=this.epsilon||t>2&&e<=t-2||t>2&&i>=this.epsilon)&&(i=this.chiSquaredProbabilityDensity(e,t),!(i<this.epsilon&&e>=t-2&&t>2));)r[e.toFixed(2)]=i,e+=.01;return r},i.prototype.chiSquaredCumulativeValue=function(t,e){return void 0===e?this.errorMessage("Chi squared cumulative distribution value: no value for degrees of freedom (df) given."):e<=0?this.errorMessage("Chi squared cumulative distribution value: degrees of freedom (df) must be larger than 0."):t<=0?0:this.regularisedGamma(.5*e,.5*t)},i.prototype.chiSquaredCumulativeDistribution=function(t){if(void 0===t)return this.errorMessage("Chi squared cumulative distribution: no value for degrees of freedom (df) given.");if(t<=0)return this.errorMessage("Chi squared cumulative distribution: degrees of freedom (df) must be larger than 0.");let e=.01,i=0,r={"0.00":0};for(;i<=1-this.epsilon&&(i=this.chiSquaredCumulativeValue(e,t),!(i>=1-this.epsilon));)i>0&&(r[e.toFixed(2)]=i),e+=.01;return r},i.prototype.barnardsTest=function(t,e){if(void 0===e)return this.errorMessage("Barnard's test: No data was supplied.");let i=this.contingencyTable(t,e,"Barnard's test");if(void 0===i)return;let{a:r,b:n,c:s,d:a}=i,o=r+n+s+a;if(o>this.maxBarnardsN)return this.errorMessage("Barnard's test is a resource-intensive method, relative to the total number of datasets to analyze. There are "+o+" datasets in the supplied data, exceeding the maxinum of "+this.maxBarnardsN+'. You can change this number by changing the "maxBarnardsN" option (be cautious).');var u=(r+n)/o;u=u*(1-u)*(1/(r+s)+1/(n+a)),u=(n/(n+a)-r/(r+s))/Math.sqrt(u),isNaN(u)&&(u=0);let l=[];for(var h=0;h<1;h=this.sumExact([h,.001])){let t=0;for(var d=0;d<=r+s;d++)for(var c=0;c<=n+a;c++){let e=(d+c)/o;if(e=e*(1-e)*(1/(r+s)+1/(n+a)),e=(d/(r+s)-c/(n+a))/Math.sqrt(e),!isNaN(e)&&Math.abs(e)>=Math.abs(u)){let e=this.binomialCoefficient(r+s,d)*this.binomialCoefficient(n+a,c);e*=Math.pow(h,d+c)*Math.pow(1-h,o-d-c),t+=isNaN(e)?0:e}}l.push({nuisance:h,significance:t})}return l=this.sortDataByColumn("significance",{data:l,order:"desc"}),{wald:u,nuisance:l[0].nuisance,pOneTailed:.5*l[0].significance,pTwoTailed:l[0].significance}},i.prototype.binomialTest=function(t,e,i=.5){if(void 0===e)return this.errorMessage("Binomial test requires the data to test and a value which is hypotethised to be observed with a probability of alpha.");if(i<0||i>1)return this.errorMessage("Binomial test is only defined for probabilities alpha with alpha ≥ 0 and alpha ≦ 1.");let r=this.getScale(t);if("interval"===r||"metric"===r)return this.errorMessage("Binomial test is only defined for data of nominal or ordinal dichotomic scale.");let n=this.validateInput(t,"nominal","binomial test");if(!1===n)return;let s=this.getUniqueValues(n.data);if(s.length>2)return this.errorMessage("Binomial test is only defined for dichotomic data. The supplied data has "+s.length+" unique values.");if(2===s.length&&s.indexOf(e)<0)return this.errorMessage('The value "'+e+'" was not found in the supplied data.');let a=n.data.filter((function(t){return t===e})).length,o=this.binomialProbabilityMass(a,n.length,i),u=this.binomialCumulativeValue(a-1,n.length,i),l=1-u-o;return{pExactly:o,pFewer:u,pAtMost:u+o,pMore:l,pAtLeast:l+o}},i.prototype.signTest=function(t,e){if(void 0===e)return this.errorMessage("Sign test: No data was supplied.");let i=this.validateInput(t,"ordinal","sign test"),r=this.validateInput(e,"ordinal","sign test");if(!1===i||!1===r)return;if(0===i.length||0===r.length)return;let n=this.reduceToPairs(i.data,r.data);n.missings;let s=n.length,a=n.valuesFirst,o=n.valuesSecond,u=0;for(var l=0;l<s;l++)a[l]>o[l]&&(u+=1);let h=this.binomialProbabilityMass(u,s),d=this.binomialCumulativeValue(u-1,s),c=1-d-h;return{positives:u,pExactly:h,pFewer:d,pAtMost:d+h,pMore:c,pAtLeast:c+h}},i.prototype.fishersExactTest=function(t,e){if(void 0===e)return this.errorMessage("Fisher's exact test requires two columns to analyze.");let i=this.contingencyTable(t,e,"Fisher's exact test");if(void 0===i)return;let{a:r,b:n,c:s,d:a}=i;return this.binomialCoefficient(r+n,r)*this.binomialCoefficient(s+a,s)/this.binomialCoefficient(r+n+s+a,r+s)},i.prototype.mannWhitneyU=function(t,e){if(void 0===e)return this.errorMessage("Mann-Whitney-U test requires two columns to analyze.");let i=this.validateInput(t,"nominal","Mann-Whitney-U test"),r=this.validateInput(e,"ordinal","Mann-Whitney-U test");if(!1===i||!1===r)return;if(0===i.length||0===r.length)return;this.sort(r.data);let n=this.getUniqueValues(i.data);if(2!==n.length)return this.errorMessage('The Mann-Whitney-U test requires the independent variable to have exactly two unique values. Variable "'+independentValue+'" has '+n.length+" different values: "+i.data.join(", "));let s=this.assignRanks(e),a=s.reduce(((i,r)=>r[t]===n[0]?i+r["rank-"+e]:i),0),o=s.reduce(((e,i)=>i[t]===n[0]?e+1:e),0),u=s.reduce(((i,r)=>r[t]===n[1]?i+r["rank-"+e]:i),0),l=s.reduce(((e,i)=>i[t]===n[1]?e+1:e),0),h=o*(.5*o+l+.5)-a,d=l*(.5*l+o+.5)-u,c=Math.min(h,d),f=(c-.5*o*l)/Math.sqrt(o*l*(o+l+1)/12),p=1-this.normalCumulativeValue(Math.abs(f));return{MannWhitneyU:c,zScore:f,pOneTailed:p,pTwoTailed:2*p}},i.prototype.chiSquaredTest=function(t,e){if(void 0===e)return this.errorMessage("Chi Squared Test: You need to specify two variables, either of nominal or ordinal scale.");let i=this.getScale(t),r=this.getScale(e);if("ordinal"!==i&&"nominal"!==i||"ordinal"!==r&&"nominal"!==r)return this.errorMessage("Chi Squared Test: Both variables need to be either of nominal or ordinal scale.");let n=this.contingencyTable(t,e);if(void 0===n)return this.errorMessage("Chi Squared Test: Failed to create a contingency table. Please make sure your data is prepared correctly.");n=n.detailled;let s,a=n.total.total,o=0,u=Object.keys(n).length-1;for(var l in u=(u-1)*(Object.keys(n.total).length-u-2),n)if(this.has(n,l)&&"total"!==l){let t=n[l].total;for(var h in n[l])if(this.has(n[l],h)&&"total"!==h){let e=t*n.total[h]/a;o+=Math.pow(n[l][h]-e,2)/e}}return s=o<0||u<1?0:1-this.chiSquaredCumulativeValue(o,u),{PearsonChiSquared:o,degreesOfFreedom:u,significance:s}},i.prototype.studentsTTestOneSample=function(t,e){if(void 0===e||!this.isNumeric(e))return this.errorMessage("Student's t-test (one sample) requires data and the mean for which the null hypothesis should hold true.");let i=this.validateInput(t,"interval","student's t-test (one sample)");if(!1===i)return;if(0===i.length)return;let r=this.mean(i.data),n=this.standardDeviation(i.data),s=Math.sqrt(i.length)*(r-e)/n,a=i.length-1,o=this.studentsTCumulativeValue(Math.abs(s),a);return o>.5&&(o=1-o),{tStatistic:s,degreesOfFreedom:a,pOneSided:o,pTwoSided:2*o}},i.prototype.studentsTTestTwoSamples=function(t,e,{nullHypothesisDifference:i=0,dependent:r=!1}={}){if(void 0===e)return this.errorMessage("Student's t-test (two sample) requires data for two columns and the difference of their means for which the null hypothesis should hold true.");let n=this.validateInput(t,"interval","student's t-test (two sample)"),s=this.validateInput(e,"interval","student's t-test (two sample)");if(!1===n||!1===s)return;let a,o,u=n.length,l=s.length,h={};if(0===u||0===l)return;if(r){let t=this.reduceToPairs(n.data,s.data),e=t.valuesFirst,r=t.valuesSecond,l=0,c=0;for(var d=0;d<t.length;d++)c+=e[d]-r[d];c/=t.length;for(d=0;d<t.length;d++)l+=Math.pow(e[d]-r[d]-c,2);l=Math.sqrt(l/(t.length-1)),a=Math.sqrt(u)*(c-i)/l,o=t.length-1,h={tStatistic:a,degreesOfFreedom:o,missings:t.missings}}else{let t=this.mean(n.data),e=this.mean(s.data),r=this.variance(n.data),d=this.variance(s.data);a=(t-e-i)/Math.sqrt(((u-1)*r+(l-1)*d)/(u+l-2)),a*=Math.sqrt(u*l/(u+l)),o=u+l-2,h={tStatistic:a,degreesOfFreedom:o}}let c=this.studentsTCumulativeValue(a,o);return c>.5&&(c=1-c),h.pOneSided=c,h.pTwoSided=2*c,h},i.prototype.gaussianError=function(t){if(void 0===t||!this.isNumeric(t))return this.errorMessage("Gaussian Error Function: No valid value for x supplied. X needs to be numeric.");let e=1/(1+.5*Math.abs(t)),i=-t*t-1.26551223+1.00002368*e+.37409196*e*e+.09678418*Math.pow(e,3)-.18628806*Math.pow(e,4)+.27886807*Math.pow(e,5)-1.13520398*Math.pow(e,6)+1.48851587*Math.pow(e,7)-.82215223*Math.pow(e,8)+.17087277*Math.pow(e,9);return i=Math.exp(i)*e,t>=0?1-i:i-1},i.prototype.inverseGaussianError=function(t){if(void 0===t||!this.isNumeric(t))return this.errorMessage("Inverse Gaussian Error Function: No valid value for x supplied. X needs to be numeric.");if(t>1)return this.errorMessage("Inverse Gaussian Error Function: x can not be larger than 1.");if(t<-1)return this.errorMessage("Inverse Gaussian Error Function: x can not be smaller than -1.");var e,i=-Math.log((1-t)*(1+t));return i<5?(i-=2.5,e=Number(3.43273939e-7)+Number(2.81022636e-8)*i,e=Number(-35233877e-13)+e*i,e=1.50140941+(e=.246640727+(e=(e=(e=.00021858087+(e=Number(-439150654e-14)+e*i)*i)*i-.00125372503)*i-.00417768164)*i)*i):e=2.83297682+(e=1.00167406+(e=.00943887047+(e=(e=.00573950773+(e=(e=.00134934322+(e=.000100950558-.000200214257*(i=Math.sqrt(i)-3))*i)*i-.00367342844)*i)*i-.0076224613)*i)*i)*i,(e*t).toFixed(7)},i.prototype.probit=function(t){return void 0!==t&&this.isNumeric(t)?t<0||t>1?this.errorMessage("Probit is only defined for quantiles p with 1 ≥ p ≥ 0."):0===t?-1/0:1===t?1/0:Math.sqrt(2)*this.inverseGaussianError(2*t-1):this.errorMessage("Probit: No valid value for quantile supplied. quantile needs to be numeric.")},i.prototype.fisherYatesShuffle=function(t,e=Math.random){if(void 0===t)return this.errorMessage("Fisher-Yates shuffle: No data given.");let i=this.validateInput(t,"nominal","");if(!1===i)return;let r,n,s=i.data,a=i.length;for(;a;)n=Math.floor(e()*a--),r=s[a],s[a]=s[n],s[n]=r;return s},i.prototype.xorshift=function(t,e=0){if(void 0===t||t.constructor!==Array||4!==t.length)return this.errorMessage("Xorshift needs to be seeded with an array consisting of four numbers.");if(!Number.isInteger(e)||e<0)return this.errorMessage("Xorshift: startIndex must be a non-negative integer.");let i=4,r=new Uint32Array(64);r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3];const n=function(t,e,i){for(var r=e;r<i;r++){let e=(t[0]^t[0]<<11)>>>0;t[0]=t[1],t[1]=t[2],t[2]=t[3],t[3]=((t[3]^t[3]>>>19)>>>0^(e^e>>>8)>>>0)>>>0,t[r]=t[3]}return t};this.next=function(t=!0){let e=r[i];return i++>=64&&(i=4,n(r,4,64)),t?e/4294967296:e},r=n(r,4,64);for(var s=0,a=e;s<a;s++)this.next()},i.prototype.boxMuller=function(t=0,e=1,{randomSourceA:i=Math.random,randomSourceB:r=Math.random}={}){let n=0,s=0,a=0,o=0;do{n=i(),a+=1}while((n<=0||n>=1)&&a<50);do{s=r(),o+=1}while((s<=0||s>=1)&&o<50);for(;n<=0||n>=1;)n=Math.random();for(;s<=0||s>=1;)s=Math.random();return Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*s)*e+t},i.prototype.ziggurat=function(t=0,e=1){let i=123456789,r=[128],n=[128],s=[128];const a=function(){let t=i,e=i;return e^=e<<13,e^=e>>>17,e^=e<<5,i=e,t+e|0},o=function(){return.5*(1+a()/-Math.pow(2,31))};!function(){i^=(new Date).getTime();let t=2147483648,e=3.442619855899,a=e,o=.00991256303526217,u=o/Math.exp(-.5*e*e);s[0]=Math.floor(e*t/u),s[1]=0,r[0]=u/t,r[127]=e/t,n[0]=1,n[127]=Math.exp(-.5*e*e);for(var l=126;l>=1;l--)e=Math.sqrt(-2*Math.log(o/e+Math.exp(-.5*e*e))),s[l+1]=Math.floor(e*t/a),a=e,n[l]=Math.exp(-.5*e*e),r[l]=e/t}(),this.next=function(){let i=a(),u=127&i;return(Math.abs(i)<s[u]?i*r[u]:function(t,e){let i,u,l=3.442619855899,h=1/l;for(;;){if(i=t*r[e],0===e){for(i=-Math.log(o())*h,u=-Math.log(o());u+u<i*i;)i=-Math.log(o())*h,u=-Math.log(o());return t>0?l+i:-l-i}if(n[e]+o()*(n[e-1]-n[e])<Math.exp(-.5*i*i))return i;if(e=127&(t=a()),Math.abs(t)<s[e])return t*r[e]}}(i,u))*e+t}}}));const Y=new K,X=new Map,H=(t,e)=>{if(t>=8&&e>=10||t>=10&&3<=e&&e<=10)return 1;const i=JSON.stringify([t,e]);if(X.has(i))return X.get(i);const r=Y.studentsTCumulativeValue(t,e);return X.set(i,r),r},J=(t,e,i)=>H(e,19)-H(t,19);function Q(t){const e=[];return t.forEach((()=>e.push(function(t){return t[Math.floor(Math.random()*t.length)]}(t)))),e}function Z(t){return 0===t.length?NaN:t.reduce(((t,e)=>t+e))/t.length}window.stats=Y;const tt=(t,e)=>t<e,et=(t,e)=>t>e,it=(t,e)=>t!=e,rt={};rt[tt]="<",rt[et]=">",rt[it]="≠",rt["<"]=tt,rt[">"]=et,rt["≠"]=it;class nt{constructor(t,e){this.operation=t,this.h0=e,this.condition=t=>this.operation(t,this.h0)}toString(){return this.operation==tt?`u < ${this.h0}`:this.operation==et?`u > ${this.h0}`:this.operation==it?`u ≠ ${this.h0}`:""}}function st(t,e){const{condition:i,operation:r,h0:n}=e,s=function(t){const e=[];for(let i=0;i<1e4;++i)e.push(Z(Q(t)));return e}(t).sort();Z(t);const{length:a}=s,o=(()=>{if(r==it){const t=s.filter((t=>t<n)).length,e=s.filter((t=>t>n)).length;return 2*Math.min(t,e)/a}return s.filter(i).length/a})();return{p:()=>o,ci(t){const e=Math.floor(a*(1-t)/2);return{left:s[e],right:s[a-e]}}}}function at(t,e){const{condition:i,h0:r}=e,n=Z(t);t.length;const s=(()=>{const i=function(t,e){return(Z(t)-e)/ot(t)}(t,r),n=(t,e)=>J(t,e);return e.operation==tt?n(i,99):e.operation==et?n(-99,i):e.operation==it?2*n(-99,Math.min(i,-i)):0})(),a=new Map,o=ot(t);return{p:()=>s,ci(e){if(!a.has(e)){const i=function(t,e,i=.001,r=500){const n=JSON.stringify([t,e]);if(ut.has(n))return ut.get(n);let s=0,a=10,o=0,u=0;for(;s<a&&u++<r;)o=(s+a)/2,J(-o,o)>t?a=o:s=o+i;return ut.set(n,s),s}(e,t.length-1)*o;a.set(e,{left:n-i,right:n+i})}return a.get(e)}}}function ot(t){return 0===t.length?1/0:function(t){if(0===t.length)return 1/0;const e=Z(t);return(t.map((t=>(t-e)**2)).reduce(((t,e)=>t+e),0)/Math.max(1,t.length-1))**.5}(t)/t.length**.5}const ut=new Map;function lt(e){let i,r,n,s,a,h,p,g,b,M,y,w,x,S,N,T,q=e[1].toFixed(8)+"";return{c(){i=d("div"),r=d("p"),n=c("P: "),s=d("span"),a=c(q),h=f(),p=d("p"),g=d("span"),b=c(e[0]),M=c("%"),y=c("\n    confidence interval:\n    "),w=d("span"),x=c(e[2]),S=c(" to\n    "),N=d("span"),T=c(e[3]),m(s,"class","num"),m(g,"class","num"),m(w,"class","num"),m(N,"class","num")},m(t,e){u(t,i,e),o(i,r),o(r,n),o(r,s),o(s,a),o(i,h),o(i,p),o(p,g),o(g,b),o(g,M),o(p,y),o(p,w),o(w,x),o(p,S),o(p,N),o(N,T)},p(t,[e]){2&e&&q!==(q=t[1].toFixed(8)+"")&&v(a,q),1&e&&v(b,t[0]),4&e&&v(x,t[2]),8&e&&v(T,t[3])},i:t,o:t,d(t){t&&l(i)}}}function ht(t,e,i){let r,n,s,a,o,{sim:u=(()=>({}))}=e,{seq:l=[]}=e,{confidence:h=.95}=e,{ha:d}=e;const c=t=>(""+Math.ceil(1e3*t)/1e3).padEnd(6,0);return t.$$set=t=>{"sim"in t&&i(4,u=t.sim),"seq"in t&&i(5,l=t.seq),"confidence"in t&&i(0,h=t.confidence),"ha"in t&&i(6,d=t.ha)},t.$$.update=()=>{112&t.$$.dirty&&i(7,r=u(l,d)),192&t.$$.dirty&&i(1,n=r.p(d.condition)),129&t.$$.dirty&&i(8,s=r.ci(h/100)),256&t.$$.dirty&&i(2,a=c(s.left)),256&t.$$.dirty&&i(3,o=c(s.right))},[h,n,a,o,u,l,d,r,s]}class dt extends L{constructor(t){super(),_(this,t,ht,lt,s,{sim:4,seq:5,confidence:0,ha:6})}}const{window:ct}=A;function ft(t,e,i){const r=t.slice();return r[14]=e[i],r}function pt(t){let e,i,r,s,a,h,g,b,y,w,x=(null==t[14].start?t[14].end:t[14].start)+"";return{c(){e=d("div"),i=d("p"),r=c(x),s=f(),a=d("div"),h=f(),g=d("div"),b=f(),m(i,"class","bar-label svelte-1e7eyvb"),m(a,"class","bar svelte-1e7eyvb"),M(a,"height",t[14].amt/3+"em"),m(g,"class","bar-handle svelte-1e7eyvb"),m(e,"class","bar-container svelte-1e7eyvb")},m(l,d){u(l,e,d),o(e,i),o(i,r),o(e,s),o(e,a),o(e,h),o(e,g),o(e,b),y||(w=p(g,"mousedown",(function(){n(t[10](t[14]))&&t[10](t[14]).apply(this,arguments)})),y=!0)},p(e,i){t=e,1&i&&x!==(x=(null==t[14].start?t[14].end:t[14].start)+"")&&v(r,x),1&i&&M(a,"height",t[14].amt/3+"em")},d(t){t&&l(e),y=!1,w()}}}function mt(e){let i,n,s,a,c=e[0],f=[];for(let t=0;t<c.length;t+=1)f[t]=pt(ft(e,c,t));return{c(){i=d("div"),n=d("div");for(let t=0;t<f.length;t+=1)f[t].c();m(n,"class","bins svelte-1e7eyvb"),m(i,"class","dist")},m(t,r){u(t,i,r),o(i,n);for(let t=0;t<f.length;t+=1)f[t].m(n,null);s||(a=[p(ct,"mousedown",e[8]),p(ct,"mousemove",e[9])],s=!0)},p(t,[e]){if(19&e){let i;for(c=t[0],i=0;i<c.length;i+=1){const r=ft(t,c,i);f[i]?f[i].p(r,e):(f[i]=pt(r),f[i].c(),f[i].m(n,null))}for(;i<f.length;i+=1)f[i].d(1);f.length=c.length}},i:t,o:t,d(t){t&&l(i),h(f,t),s=!1,r(a)}}}function gt(t,e,i){let r,{seq:n=W([])}=e,{n:s=10}=e,a=[],o=()=>{},u=null,l=null;function h(t){return e=>{if(1==e.buttons&&null!=u){0==t.amt&&(t.amt=1,i(7,a));const r=parseFloat(getComputedStyle(l).height),{top:n,bottom:s}=u.getBoundingClientRect(),o=(r+((n+s)/2-e.clientY))/r;t.amt*=o,t.amt=Math.min(Math.max(t.amt,0),50),i(7,a)}}}function d(){i(2,u=null),i(3,l=null),i(1,o=()=>{})}var c;c=()=>window.addEventListener("mouseup",d),S().$$.on_mount.push(c),function(t){S().$$.on_destroy.push(t)}((()=>window.removeEventListener("mouseup",d)));return t.$$set=t=>{"seq"in t&&i(5,n=t.seq),"n"in t&&i(6,s=t.n)},t.$$.update=()=>{128&t.$$.dirty&&i(7,a=a.length?a:function(t,e,i){const r=Y.normalDistribution(t,e),n=parseFloat,s=Object.keys(r).sort(((t,e)=>n(t)-n(e))),a=[{start:Math.floor(n(s[0])),amt:0}],o=()=>a.length;for(const t of s){const e=parseFloat(t);e-a[o()-1].start<i?a[o()-1].amt+=r[t]:a.push({start:e,amt:1})}return[...a.map((t=>({...t,amt:Math.floor(t.amt)}))),{end:a[o()-1].start+i}]}(25,5,2)),128&t.$$.dirty&&i(0,r=a.filter((t=>null!=t.start))),97&t.$$.dirty&&n.set(function(t,e){const i=e/t.reduce(((t,e)=>t+e.amt),0),r=t[1].start-t[0].start,n=[];t.forEach((t=>{const e=Math.ceil(t.amt*i);if(e){const i=t.start,s=i+r;for(let t=0;t<e;++t)n.push(Math.random()*(s-i)+i)}}));const s=Math.floor((n.length-e)/2);return n.slice(s,s+e)}(r,s)),128&t.$$.dirty&&a[a.length-1].end,1&t.$$.dirty&&Math.max(...r.map((t=>t.amt)))},[r,o,u,l,h,n,s,a,t=>{i(2,u=t.target),i(3,l=u.parentElement.querySelector(".bar"))},t=>o(t),t=>i(1,o=h(t))]}class vt extends L{constructor(t){super(),_(this,t,gt,mt,s,{seq:5,n:6})}}function bt(t,e,i){const r=t.slice();return r[13]=e[i],r}function Mt(e){let i,r="string"==typeof e[13]&&function(e){let i,r,n=e[13]+"";return{c(){i=d("option"),r=c(n),i.__value=e[13],i.value=i.__value},m(t,e){u(t,i,e),o(i,r)},p:t,d(t){t&&l(i)}}}(e);return{c(){r&&r.c(),i=c("")},m(t,e){r&&r.m(t,e),u(t,i,e)},p(t,e){"string"==typeof t[13]&&r.p(t,e)},d(t){r&&r.d(t),t&&l(i)}}}function yt(t){let e,i,n,s,a,g,w,x,S,N,T,q,C,$,I,D,O,F,P,B,A,G,_,L,z,W,K,Y,X,H,J,Q,Z,tt,et,it,nt,ot,ut,lt,ht,ct,ft,pt,mt,gt,yt,wt,xt,St,Nt,Tt,qt,Ct,$t,It,kt;a=new vt({props:{seq:t[6],n:t[3]}}),F=new dt({props:{sim:st,seq:t[5],confidence:t[2],ha:t[4]}}),_=new dt({props:{sim:at,seq:t[5],confidence:t[2],ha:t[4]}});let Dt=Object.values(rt),Ot=[];for(let e=0;e<Dt.length;e+=1)Ot[e]=Mt(bt(t,Dt,e));return{c(){e=d("main"),i=d("div"),n=d("h2"),n.textContent="Sample Distribution",s=f(),R(a.$$.fragment),g=f(),w=d("input"),x=f(),S=d("label"),N=c("n="),T=c(t[3]),q=f(),C=d("div"),$=d("div"),I=d("div"),D=d("h2"),D.textContent="Monte Carlo",O=f(),R(F.$$.fragment),P=f(),B=d("div"),A=d("h2"),A.textContent="Student's t model",G=f(),R(_.$$.fragment),L=f(),z=d("div"),W=d("div"),K=d("p"),Y=c("H"),X=d("sub"),X.textContent="0",H=c(": μ =\n          "),J=d("input"),Q=f(),Z=d("label"),tt=c(t[0]),et=f(),it=d("p"),nt=c("H"),ot=d("sub"),ot.textContent="A",ut=c(": μ\n          "),lt=d("select");for(let t=0;t<Ot.length;t+=1)Ot[t].c();ht=f(),ct=d("input"),ft=f(),pt=d("label"),mt=c(t[0]),gt=f(),yt=d("div"),wt=d("label"),xt=c("Confidence: "),St=d("span"),Nt=c(t[2]),Tt=c("%"),qt=f(),Ct=d("input"),m(w,"id","n-slider"),m(w,"class","slider svelte-xllmk2"),m(w,"type","range"),m(w,"min",2),m(w,"max",60),m(S,"for","n-slider"),m(i,"class","input svelte-xllmk2"),m(I,"class","svelte-xllmk2"),m(B,"class","svelte-xllmk2"),m($,"class","info svelte-xllmk2"),m(J,"id","h0-value"),m(J,"class","h-value svelte-xllmk2"),m(J,"type","text"),m(Z,"for","h0-value"),M(Z,"font-size","0px"),void 0===t[1]&&k((()=>t[10].call(lt))),m(ct,"id","ha-value"),m(ct,"class","h-value svelte-xllmk2"),m(ct,"type","text"),m(pt,"for","ha-value"),M(pt,"font-size","0px"),m(W,"class","h-picker svelte-xllmk2"),m(St,"class","num"),m(wt,"for","confidence"),m(wt,"class","svelte-xllmk2"),m(Ct,"id","confidence"),m(Ct,"class","slider svelte-xllmk2"),m(Ct,"type","range"),m(Ct,"min",1),m(Ct,"max",99),m(yt,"class","conf-slider svelte-xllmk2"),m(z,"class","h-picker-conf"),m(C,"class","info-h0 svelte-xllmk2"),m(e,"class","svelte-xllmk2")},m(r,l){u(r,e,l),o(e,i),o(i,n),o(i,s),E(a,i,null),o(i,g),o(i,w),b(w,t[3]),o(i,x),o(i,S),o(S,N),o(S,T),o(e,q),o(e,C),o(C,$),o($,I),o(I,D),o(I,O),E(F,I,null),o($,P),o($,B),o(B,A),o(B,G),E(_,B,null),o(C,L),o(C,z),o(z,W),o(W,K),o(K,Y),o(K,X),o(K,H),o(K,J),b(J,t[0]),o(K,Q),o(K,Z),o(Z,tt),o(W,et),o(W,it),o(it,nt),o(it,ot),o(it,ut),o(it,lt);for(let t=0;t<Ot.length;t+=1)Ot[t].m(lt,null);y(lt,t[1]),o(it,ht),o(it,ct),b(ct,t[0]),o(it,ft),o(it,pt),o(pt,mt),o(z,gt),o(z,yt),o(yt,wt),o(wt,xt),o(wt,St),o(St,Nt),o(St,Tt),o(yt,qt),o(yt,Ct),b(Ct,t[2]),$t=!0,It||(kt=[p(w,"change",t[8]),p(w,"input",t[8]),p(J,"input",t[9]),p(lt,"change",t[10]),p(ct,"input",t[11]),p(Ct,"change",t[12]),p(Ct,"input",t[12])],It=!0)},p(t,[e]){const i={};8&e&&(i.n=t[3]),a.$set(i),8&e&&b(w,t[3]),(!$t||8&e)&&v(T,t[3]);const r={};32&e&&(r.seq=t[5]),4&e&&(r.confidence=t[2]),16&e&&(r.ha=t[4]),F.$set(r);const n={};if(32&e&&(n.seq=t[5]),4&e&&(n.confidence=t[2]),16&e&&(n.ha=t[4]),_.$set(n),1&e&&J.value!==t[0]&&b(J,t[0]),(!$t||1&e)&&v(tt,t[0]),0&e){let i;for(Dt=Object.values(rt),i=0;i<Dt.length;i+=1){const r=bt(t,Dt,i);Ot[i]?Ot[i].p(r,e):(Ot[i]=Mt(r),Ot[i].c(),Ot[i].m(lt,null))}for(;i<Ot.length;i+=1)Ot[i].d(1);Ot.length=Dt.length}2&e&&y(lt,t[1]),1&e&&ct.value!==t[0]&&b(ct,t[0]),(!$t||1&e)&&v(mt,t[0]),(!$t||4&e)&&v(Nt,t[2]),4&e&&b(Ct,t[2])},i(t){$t||(V(a.$$.fragment,t),V(F.$$.fragment,t),V(_.$$.fragment,t),$t=!0)},o(t){U(a.$$.fragment,t),U(F.$$.fragment,t),U(_.$$.fragment,t),$t=!1},d(t){t&&l(e),j(a),j(F),j(_),h(Ot,t),It=!1,r(kt)}}}function wt(t,e,i){let r,n,s;const o=W([]);a(t,o,(t=>i(5,s=t)));let u=95,l=26,h=">",d=5;return t.$$.update=()=>{2&t.$$.dirty&&i(7,r=rt[h]),129&t.$$.dirty&&i(4,n=new nt(r,parseFloat(l)))},[l,h,u,d,n,s,o,r,function(){d=g(this.value),i(3,d)},function(){l=this.value,i(0,l)},function(){h=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),i(1,h)},function(){l=this.value,i(0,l)},function(){u=g(this.value),i(2,u)}]}const xt=new class extends L{constructor(t){super(),_(this,t,wt,yt,s,{})}}({target:document.body,props:{}});return"undefined"!=typeof module&&module.hot&&("undefined"!=typeof module&&module.hot.dispose((()=>{xt.$destroy()})),"undefined"!=typeof module&&module.hot.accept()),xt}();
//# sourceMappingURL=bundle.js.map
